<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sudoku App</title>
<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #0f0f0f;
    color: white;
    text-align: center;
}

h1 {
    padding: 20px;
}

#controls {
    margin-bottom: 10px;
}

select, button {
    padding: 8px 14px;
    margin: 5px;
    border: none;
    border-radius: 5px;
    font-size: 14px;
}

button {
    background: #4CAF50;
    color: white;
    cursor: pointer;
}

button:hover {
    background: #45a049;
}

#timer {
    margin: 10px;
    font-size: 18px;
}

#board {
    width: 360px;
    height: 360px;
    margin: 20px auto;
    display: grid;
    grid-template-columns: repeat(9, 1fr);
    border: 3px solid white;
}

.cell {
    border: 1px solid #555;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    cursor: pointer;
}

.cell.fixed {
    background: #2b2b2b;
    font-weight: bold;
}

.cell.selected {
    background: #333;
}

.cell.error {
    color: red;
}

.cell:nth-child(3n) {
    border-right: 3px solid white;
}

.cell:nth-child(27n + 1),
.cell:nth-child(27n + 2),
.cell:nth-child(27n + 3),
.cell:nth-child(27n + 4),
.cell:nth-child(27n + 5),
.cell:nth-child(27n + 6),
.cell:nth-child(27n + 7),
.cell:nth-child(27n + 8),
.cell:nth-child(27n + 9) {
    border-bottom: 3px solid white;
}

#numbers {
    margin-top: 10px;
}

#numbers button {
    width: 35px;
    height: 35px;
    margin: 3px;
    font-size: 16px;
}
</style>
</head>

<body>

<h1>Sudoku</h1>

<div id="controls">
    <select id="difficulty">
        <option value="easy">Easy</option>
        <option value="medium">Medium</option>
        <option value="hard">Hard</option>
    </select>
    <button onclick="newGame()">New Game</button>
</div>

<div id="timer">Time: 00:00</div>

<div id="board"></div>

<div id="numbers">
    <button onclick="inputNumber(1)">1</button>
    <button onclick="inputNumber(2)">2</button>
    <button onclick="inputNumber(3)">3</button>
    <button onclick="inputNumber(4)">4</button>
    <button onclick="inputNumber(5)">5</button>
    <button onclick="inputNumber(6)">6</button>
    <button onclick="inputNumber(7)">7</button>
    <button onclick="inputNumber(8)">8</button>
    <button onclick="inputNumber(9)">9</button>
    <button onclick="inputNumber(0)">Clear</button>
</div>

<script>
const puzzles = {
    easy: [
        [5,3,0,0,7,0,0,0,0],
        [6,0,0,1,9,5,0,0,0],
        [0,9,8,0,0,0,0,6,0],
        [8,0,0,0,6,0,0,0,3],
        [4,0,0,8,0,3,0,0,1],
        [7,0,0,0,2,0,0,0,6],
        [0,6,0,0,0,0,2,8,0],
        [0,0,0,4,1,9,0,0,5],
        [0,0,0,0,8,0,0,7,9]
    ],
    medium: [
        [0,0,0,0,0,0,2,0,0],
        [0,8,0,0,0,7,0,9,0],
        [6,0,2,0,0,0,5,0,0],
        [0,7,0,0,6,0,0,0,0],
        [0,0,0,9,0,1,0,0,0],
        [0,0,0,0,2,0,0,4,0],
        [0,0,5,0,0,0,6,0,3],
        [0,9,0,4,0,0,0,7,0],
        [0,0,6,0,0,0,0,0,0]
    ],
    hard: [
        [0,0,0,0,0,0,0,0,0],
        [0,0,0,3,0,5,0,0,0],
        [0,0,1,0,0,0,0,0,0],
        [0,0,0,0,6,0,0,0,3],
        [0,0,0,0,0,0,0,0,0],
        [7,0,0,0,2,0,0,0,0],
        [0,0,0,0,0,0,6,0,0],
        [0,0,0,4,0,9,0,0,0],
        [0,0,0,0,0,0,0,0,0]
    ]
};

let boardData = [];
let fixed = [];
let selectedCell = null;
let timerInterval;
let seconds = 0;

const board = document.getElementById("board");

function newGame() {
    clearInterval(timerInterval);
    seconds = 0;
    timerInterval = setInterval(updateTimer, 1000);

    const level = document.getElementById("difficulty").value;
    boardData = puzzles[level].map(r => r.slice());
    fixed = boardData.map(r => r.map(v => v !== 0));

    drawBoard();
}

function drawBoard() {
    board.innerHTML = "";
    selectedCell = null;

    for (let r = 0; r < 9; r++) {
        for (let c = 0; c < 9; c++) {
            const cell = document.createElement("div");
            cell.className = "cell";
            if (fixed[r][c]) cell.classList.add("fixed");
            if (boardData[r][c] !== 0) cell.textContent = boardData[r][c];

            cell.onclick = () => selectCell(r, c, cell);
            board.appendChild(cell);
        }
    }
}

function selectCell(r, c, cell) {
    if (fixed[r][c]) return;

    document.querySelectorAll(".cell").forEach(c => c.classList.remove("selected"));
    cell.classList.add("selected");
    selectedCell = { r, c, cell };
}

function inputNumber(num) {
    if (!selectedCell) return;

    const { r, c, cell } = selectedCell;
    boardData[r][c] = num;
    cell.textContent = num === 0 ? "" : num;

    cell.classList.toggle("error", !isValid(r, c, num));
}

function isValid(row, col, num) {
    if (num === 0) return true;

    for (let i = 0; i < 9; i++) {
        if (i !== col && boardData[row][i] === num) return false;
        if (i !== row && boardData[i][col] === num) return false;
    }

    const boxRow = Math.floor(row / 3) * 3;
    const boxCol = Math.floor(col / 3) * 3;

    for (let r = boxRow; r < boxRow + 3; r++) {
        for (let c = boxCol; c < boxCol + 3; c++) {
            if ((r !== row || c !== col) && boardData[r][c] === num) return false;
        }
    }
    return true;
}

document.addEventListener("keydown", e => {
    if (e.key >= "1" && e.key <= "9") inputNumber(Number(e.key));
    if (e.key === "Backspace" || e.key === "Delete") inputNumber(0);
});

function updateTimer() {
    seconds++;
    const m = String(Math.floor(seconds / 60)).padStart(2, "0");
    const s = String(seconds % 60).padStart(2, "0");
    document.getElementById("timer").textContent = `Time: ${m}:${s}`;
}

newGame();
</script>

</body>
</html>
